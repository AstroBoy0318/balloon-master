(this.webpackJsonpballoons=this.webpackJsonpballoons||[]).push([[0],{262:function(e,t,s){},279:function(e,t){},302:function(e,t){},304:function(e,t){},380:function(e,t){},382:function(e,t){},39:function(e,t,s){},414:function(e,t){},419:function(e,t){},421:function(e,t){},428:function(e,t){},441:function(e,t){},536:function(e,t){},546:function(e,t,s){"use strict";s.r(t);var n,a=s(66),i=s(9),o=s.n(i),r=s(43),c=s.n(r),l=(s(262),s(3)),d=s(5),h=s(7),u=s(6),p=s(552),b=s(553),m=(s.p,s(39),s(4)),j=s.n(m),g=s(141),f=s(10),O=s(44),y=s(100),v=s.n(y),w=function(e){return e.toLocaleTimeString()},x=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},k=s(8),S=x(3,5),C=[],B=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state={game:null},n}return Object(d.a)(s,[{key:"preload",value:function(){this.load.image("background","./phaser/Background.png"),this.load.spritesheet("balloon","./phaser/Balloon Pop.png",{frameWidth:390,frameHeight:481}),this.load.image("cloudBack","./phaser/Clouds_03_Back.png"),this.load.image("cloudMid","./phaser/Clouds_02_Middle.png"),this.load.image("cloudFront","./phaser/Clouds_01_Front.png")}},{key:"create",value:function(){var e=this,t=this.add.sprite(0,0,"background");t.displayWidth=window.innerWidth,t.displayHeight=window.innerHeight,t.setOrigin(0,0),this.cloudBack=this.add.tileSprite(window.innerWidth/2,window.innerHeight/2,window.innerWidth,window.innerHeight,"cloudBack"),this.cloudBack.setScale(1),this.cloudBack.tileScaleX=.5,this.cloudBack.tileScaleY=.6,this.cloudMid=this.add.tileSprite(window.innerWidth/2,window.innerHeight/2,window.innerWidth,window.innerHeight,"cloudMid"),this.cloudMid.setScale(1),this.cloudMid.tileScaleX=.5,this.cloudMid.tileScaleY=.6,this.cloudFront=this.add.tileSprite(window.innerWidth/2,window.innerHeight/2,window.innerWidth,window.innerHeight,"cloudFront"),this.cloudFront.setScale(1),this.cloudFront.tileScaleX=.5,this.cloudFront.tileScaleY=.6;var s=[];this.anims.create({key:"idle",frames:this.anims.generateFrameNumbers("balloon",{start:0,end:0}),frameRate:64}),this.anims.create({key:"pop",frames:this.anims.generateFrameNumbers("balloon",{start:0,end:16}),frameRate:96});for(var a=function(t){var a=e.physics.add.sprite((Math.random()/6*(t+1)+.2)*window.innerWidth,window.innerHeight+300*t,"balloon",{ignoreGravity:!1}).setInteractive();s.push(a),s[t].displayWidth=140,s[t].displayHeight=200;var i=400+200*Math.random(),o=-1*(300+200*Math.random());s[t].body.allowGravity=!1,s[t].setBounce(0,0),s[t].setAcceleration(0,0),s[t].setCollideWorldBounds(!1),s[t].body.setGravityY(0),s[t].setVelocity(i,o),s[t].body.angularVelocity=250+100*Math.random(),s[t].body.angularDrag=0,s[t].on("pointerdown",(function(e){null===e.downElement.closest(".Chat")&&(n.started&&n.clickBalloon(),s[t].anims.play("pop",!0),s[t].on("animationcomplete",(function(e,n){"pop"==e.key&&(s[t].x=(Math.random()/6*(t+1)+.2)*window.innerWidth,s[t].y=window.innerHeight,s[t].anims.play("idle",!0),C[t]=-1*C[t])}),this))})),C.push(Math.pow(-1,t))},i=0;i<S;i++)a(i);this.balloons=s}},{key:"update",value:function(){this.cloudBack.tilePositionX-=.15,this.cloudMid.tilePositionX+=.3,this.cloudFront.tilePositionX-=.75;for(var e=0;e<S;e++){this.balloons[e].x<0?this.balloons[e].x=window.innerWidth:this.balloons[e].x>window.innerWidth&&(this.balloons[e].x=0),this.balloons[e].y<0&&(this.balloons[e].y=window.innerHeight,this.balloons[e].x=(Math.random()/6*(e+1)+.2)*window.innerWidth,C[e]=-1*C[e]);var t=100+200*Math.random(),s=-1*(150+200*Math.random());this.balloons[e].setVelocity(t*C[e],s)}}},{key:"componentWillReceiveProps",value:function(e){n.clickBalloon=e.clickBalloon,n.started=e.gameStarted}},{key:"componentDidMount",value:function(){new v.a.Scene(n);var e={type:v.a.AUTO,parent:"phaser-parent",pixelArt:!1,backgroundColor:"rgba(176, 55, 110,0.5)",width:window.innerWidth,height:window.innerHeight,physics:{default:"arcade",arcade:{gravity:{y:200},debug:!1}},scene:{preload:this.preload,create:this.create,update:this.update}};n=new v.a.Game(e),console.log(n),n.clickBalloon=this.props.clickBalloon,n.started=this.props.gameStarted}},{key:"render",value:function(){return Object(k.jsx)("section",{id:"phaser-parent"})}}]),s}(i.Component),M=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state={username:"",password:"",email:"",isLogin:!1,isRegister:!1},n.handleUsername=n.handleUsername.bind(Object(f.a)(n)),n.handlePassword=n.handlePassword.bind(Object(f.a)(n)),n.handleEmail=n.handleEmail.bind(Object(f.a)(n)),n.handleLogin=n.handleLogin.bind(Object(f.a)(n)),n.handleRegister=n.handleRegister.bind(Object(f.a)(n)),n.handleBack=n.handleBack.bind(Object(f.a)(n)),n}return Object(d.a)(s,[{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleLogin",value:function(){if(this.state.isLogin){if(""==this.state.username)return void this.props.alert.error("Input username");this.props.login(this.state.username,this.state.password)}else this.setState({isLogin:!0})}},{key:"handleBack",value:function(){this.setState({isLogin:!1,isRegister:!1})}},{key:"handleRegister",value:function(){if(this.state.isRegister){if(""==this.state.username)return void this.props.alert.error("Input username");this.props.register(this.state.username,this.state.email,this.state.password)}else this.setState({isRegister:!0})}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"Login",children:[(this.state.isLogin||this.state.isRegister)&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("p",{children:"Username"}),Object(k.jsx)("input",{value:this.state.username,onChange:this.handleUsername}),Object(k.jsx)("br",{}),this.state.isRegister&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("p",{children:"Email"}),Object(k.jsx)("input",{value:this.state.email,onChange:this.handleEmail}),Object(k.jsx)("br",{})]}),Object(k.jsx)("p",{children:"Password"}),Object(k.jsx)("input",{type:"password",value:this.state.password,onChange:this.handlePassword}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{})]}),(this.state.isRegister||this.state.isLogin)&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("button",{className:"midnight-blue-flat-button",onClick:this.handleBack,children:"BACK"}),Object(k.jsx)("div",{className:"divider"})]}),!this.state.isRegister&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("button",{className:"midnight-blue-flat-button",onClick:this.handleLogin,children:"LOGIN"}),Object(k.jsx)("div",{className:"divider"})]}),!this.state.isLogin&&Object(k.jsx)("button",{className:"midnight-blue-flat-button",onClick:this.handleRegister,children:"REGISTER"})]})}}]),s}(i.Component),L=Object(O.c)()(M),A=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"Login",children:[Object(k.jsxs)("p",{children:["Welcome ",this.props.username,"!"]}),Object(k.jsx)("p",{children:"Current Balance:"}),Object(k.jsxs)("h2",{children:[this.props.balance,"uETH"]}),Object(k.jsx)("button",{onClick:function(){return e.props.handlePanels(1)},className:"midnight-blue-flat-button",children:"Top Up"}),Object(k.jsx)("div",{className:"divider"}),this.props.balance>0&&Object(k.jsx)("button",{onClick:function(){return e.props.handlePanels(2)},className:"midnight-blue-flat-button",children:"Cash Out"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{onClick:this.props.logOut,className:"midnight-blue-flat-button",children:"Quit"}),Object(k.jsx)("div",{className:"divider"}),Object(k.jsx)("button",{onClick:this.props.joinGame,className:"midnight-blue-flat-button",children:"JOIN GAME"})]})}}]),s}(i.Component),I=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"Login",children:[Object(k.jsxs)("p",{children:["Welcome ",this.props.username,"!"]}),Object(k.jsxs)("p",{children:["Current Balance: ",this.props.balance]}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("p",{children:"Amount"}),Object(k.jsx)("input",{value:this.props.amount,onChange:this.props.handleAmount,type:"number"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("p",{style:{display:"none"},children:"Private Key"}),Object(k.jsx)("input",{value:this.props.privatekey,onChange:this.props.handleKey,style:{width:"100%",display:"none"}}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{onClick:function(){return e.props.handlePanels(0)},className:"midnight-blue-flat-button",children:"Back"}),Object(k.jsx)("div",{className:"divider"}),Object(k.jsx)("button",{onClick:this.props.topUp,className:"midnight-blue-flat-button",children:"Top Up"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{})]})}}]),s}(i.Component),N=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"Login",children:[Object(k.jsxs)("p",{children:["Welcome ",this.props.username,"!"]}),Object(k.jsxs)("p",{children:["Current Balance: ",this.props.balance]}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("p",{children:"Amount"}),Object(k.jsx)("input",{value:this.props.amount,onChange:this.props.handleAmount,type:"number"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("p",{children:"Receiving Address"}),Object(k.jsx)("input",{value:this.props.coinbase,onChange:this.props.handleAddress}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{onClick:function(){return e.props.handlePanels(0)},className:"midnight-blue-flat-button",children:"Back"}),Object(k.jsx)("div",{className:"divider"}),Object(k.jsx)("button",{onClick:this.props.cashOut,className:"midnight-blue-flat-button",children:"Cash Out"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{})]})}}]),s}(i.Component),P=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state={messagesEndRef:o.a.createRef()},n.scrollToBottom=n.scrollToBottom.bind(Object(f.a)(n)),n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.state.messagesEndRef.current.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"Chat",style:{position:"absolute",left:"0px",bottom:"0px",backgroundColor:"#00000052",width:"350px"},children:[Object(k.jsxs)("div",{style:{height:"300px",textAlign:"left",overflow:"auto",overflowWrap:"break-word"},children:[this.props.messageList.map((function(t){return"date-separator"==t.sender?Object(k.jsxs)("div",{style:{textAlign:"center"},children:["----------",t.message,"----------"]}):Object(k.jsxs)("div",{className:"message-div",style:{color:e.props.colors[t.color]},children:[t.sender,": ",t.message," ",Object(k.jsx)("div",{className:"date",children:t.timestring})]})})),Object(k.jsx)("div",{ref:this.state.messagesEndRef})]}),Object(k.jsx)("input",{value:this.props.chatMessage,onChange:this.props.handleChat,onKeyPress:function(t){"Enter"===t.key&&e.props.sendMessage()},style:{position:"relative",bottom:"0px",width:"85%"}})]})}}]),s}(i.Component),W=s(101),G=s.n(W),R=new Promise((function(e,t){window.addEventListener("load",(function(){var t={},s=window.web3;if("undefined"!==typeof s)s=new G.a(s.currentProvider),t.web3=s,console.log("Injected web3 detected."),e(t);else{var n=new G.a.providers.HttpProvider("http://ropsten.infura.io/vKci4bjCOf3x7jLLQRWs");s=new G.a(n),t.web3=s,console.log("No web3 instance injected, using Local web3."),e(t)}}))})),T=s(68),D=s(252),E="http://cryptopop.fun:5001/",U=s.n(D)()(E),H=[{constant:!1,inputs:[{name:"amount",type:"uint256"},{name:"user",type:"bytes32"},{name:"userAddress",type:"address"},{name:"newBalance",type:"uint256"}],name:"withdraw",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"PlayerBalances",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"sender",type:"address"}],name:"changeAdmin",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"user",type:"bytes32"}],name:"deposit",outputs:[{name:"success",type:"bool"}],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"admin",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!0,stateMutability:"payable",type:"constructor"}],K=["#f72585","#b5179e","#7209b7","#560bad","#480ca8","#ffadad","#57cc99","#80ed99","#ff0a54","#ff477e","#ff5c8a","#004b23","#006400","#007200","#38b000","#ff7b00","#ff9500","#ffb700"],F=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state={web3:null,currentUser:"",username:"",password:"",sessionId:"",coinbase:"",privateKey:"",key:null,userCount:0,balance:0,spent:0,gameStarted:!1,forcePop:!1,currentPanel:0,amount:0,messageList:[{sender:"GM",message:"Welcome to Balloon Game!",date:(new Date).getUTCMilliseconds(),timestring:w(new Date)}],chatMessage:"",colorIndex:0,boomMsgList:[]},n.login=n.login.bind(Object(f.a)(n)),n.logOut=n.logOut.bind(Object(f.a)(n)),n.register=n.register.bind(Object(f.a)(n)),n.getBalance=n.getBalance.bind(Object(f.a)(n)),n.handlePanels=n.handlePanels.bind(Object(f.a)(n)),n.handleKey=n.handleKey.bind(Object(f.a)(n)),n.handleAmount=n.handleAmount.bind(Object(f.a)(n)),n.handleAddress=n.handleAddress.bind(Object(f.a)(n)),n.handleMessageBox=n.handleMessageBox.bind(Object(f.a)(n)),n.joinGame=n.joinGame.bind(Object(f.a)(n)),n.quitGame=n.quitGame.bind(Object(f.a)(n)),n.sendMessage=n.sendMessage.bind(Object(f.a)(n)),n.topUp=n.topUp.bind(Object(f.a)(n)),n.cashOut=n.cashOut.bind(Object(f.a)(n)),n.clickBalloon=n.clickBalloon.bind(Object(f.a)(n)),n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this;U.on("connect",(function(){console.log("connected"),t.setState({sessionId:U.id})})),U.on("ADD",(function(e){console.log(e),t.setState({userCount:e.count})})),U.on("POP",(function(e){console.log(e),t.setState({forcePop:!0})})),U.on("CheckBalance",(function(e){console.log(e),t.getBalance()})),U.on("CHAT",(function(t){if("I won."===t.message&&t.sender!==e.state.username){var s=t.sender+": Just won +100",n=e,a=e.state.boomMsgList;a.push(s),e.setState({boomMsgList:a}),console.log(e.state.boomMsgList),setTimeout((function(){var e=n.state.boomMsgList;e.pop(),n.setState({boomMsgList:e})}),5e3)}"I won."===t.message&&(t.message="I just won +100.");var i=e.state.messageList,o=new Date(t.date);if(1==i.length){var r={sender:"date-separator",date:t.date,message:o.toLocaleDateString()};i.push(r)}else{var c=new Date(i[i.length-1].date);if(o.toLocaleDateString()!=c.toLocaleDateString()){r={sender:"date-separator",date:t.date,message:o.toLocaleDateString()};i.push(r)}}i.push({sender:t.sender,message:t.message,color:t.color,date:t.date,timestring:w(o)}),e.setState({messageList:i})})),U.on("HISTORY",(function(e){var s=t.state.messageList;if(!(s.length>1)){for(var n=0;n<e.length;n++){var a=e[n],i=new Date(a.date);if(0==n){var o={sender:"date-separator",date:a.date,message:i.toLocaleDateString()};s.push(o)}else{var r=new Date(e[n-1].date);if(i.toLocaleDateString()!=r.toLocaleDateString()){o={sender:"date-separator",date:a.date,message:i.toLocaleDateString()};s.push(o)}}"I won."===a.message&&(a.message="I just won +100."),"I won."!==a.message&&s.push({sender:a.sender,message:a.message,color:a.color,date:a.date,timestring:w(i)})}t.setState({messageList:s})}})),R.then((function(t){e.setState({web3:t.web3});t.web3.eth.getAccounts((function(s,n){if(n&&0!=n.length&&e.setState({coinbase:n[0]}),localStorage.getItem("defaultWallet")&&localStorage.getItem("defaultWallet").length>30){var a=localStorage.getItem("defaultWallet"),i=localStorage.getItem("defaultKey");i.length>32&&(i=i.substr(2,i.length-1)),e.setState({coinbase:a,pKey:i});var o=t.web3.eth.accounts.privateKeyToAccount(localStorage.getItem("defaultKey"));console.log(o),console.log(t.web3.eth.accounts.wallet)}})).catch((function(){console.log("Error finding web3.")}))})),this.setState({colorIndex:x(0,K.length)})}},{key:"register",value:function(e,t,s){var n=this;console.log("Registering..."),fetch(E+"register/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,password:s})}).then((function(e){return e.json()})).then((function(t){"Ok"!=t.status?n.props.alert.show(t.status):n.login(e,s)})).catch((function(e){console.log(e)}))}},{key:"login",value:function(e,t){var s=this;fetch(E+"login/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,sessionId:this.state.sessionId})}).then((function(e){return e.json()})).then((function(n){if("Ok"!=n.status)s.props.alert.show(n.status);else{var a=s.state.web3.utils.soliditySha3(e);s.setState({currentUser:a,username:e,password:t},(function(){this.getBalance()}))}})).catch((function(e){console.log(e)}))}},{key:"logOut",value:function(){document.location.reload()}},{key:"getBalance",value:function(){var e=Object(g.a)(j.a.mark((function e(){var t,s,n,a=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.a.getDefaultProvider("ropsten"),s=new T.a.Contract("0x7Af6faCB28061cFEb5f7D6538B4d63988C8AeE66",H,t),e.next=4,s.PlayerBalances(this.state.currentUser);case 4:n=e.sent,console.log(1e4*T.a.utils.formatEther(n)),this.setState({balance:Number((1e4*T.a.utils.formatEther(n)).toFixed(0))}),fetch(E+"balances/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.currentUser,sessionId:this.state.sessionId})}).then((function(e){return e.json()})).then((function(e){"Ok"!=e.status?console.log(e.status):(console.log(e.spent),a.setState({spent:Number(e.spent)}))})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clickBalloon",value:function(){var e=this;console.log("CLICKED"),fetch(E+"click/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.currentUser,key:this.state.key,sessionId:this.state.sessionId})}).then((function(e){return e.json()})).then((function(t){"Winner"==t.status?(e.props.alert.success(Object(k.jsx)("div",{style:{fontSize:"2em"},children:"+100"}),{position:O.b.MIDDLE}),e.setState({spent:e.state.spent+100}),U.emit("CHAT",{sender:e.state.username,message:"I won.",color:e.state.colorIndex})):"Loser"==t.status?(e.props.alert.show("-10",{position:O.b.BOTTOM_RIGHT}),e.setState({spent:e.state.spent-10})):e.props.alert.show(t.status)})).catch((function(e){console.log(e)}))}},{key:"joinGame",value:function(){var e=this;fetch(E+"joinGame/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.currentUser,key:this.state.key,sessionId:this.state.sessionId})}).then((function(e){return e.json()})).then((function(t){"Ok"!=t.status?e.props.alert.show(t.status):e.setState({key:t.key,gameStarted:!0})})).catch((function(e){console.log(e)}))}},{key:"topUp",value:function(){var e=Object(g.a)(j.a.mark((function e(){var t,s,n,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new this.state.web3.eth.Contract(H,"0x7Af6faCB28061cFEb5f7D6538B4d63988C8AeE66"),e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return s=e.sent,e.next=6,window.ethereum.request({method:"eth_chainId"});case 6:if(3==e.sent){e.next=10;break}return this.props.alert.error("Wrong network"),e.abrupt("return");case 10:return n=T.a.utils.parseEther(this.state.amount).toString(),a={gasLimit:53e3,from:s[0],value:n},i=this,t.methods.deposit(this.state.currentUser).send(a).on("transactionHash",(function(){i.props.alert.show("Please Await Transaction"),i.setState({currentPanel:0})})).on("receipt",(function(e){i.props.alert.show("Deposit Confirmed"),i.getBalance()})),e.abrupt("return");case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cashOut",value:function(){var e=this;fetch(E+"withdraw/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({key:this.state.key,username:this.state.currentUser,password:this.state.password,address:this.state.coinbase,sessionId:this.state.sessionId,amount:this.state.amount})}).then((function(e){return e.json()})).then((function(t){"Ok"!=t.status?e.props.alert.show(t.status):(e.props.alert.show("Withdrawal Confirmed"),e.setState({currentPanel:0}))})).catch((function(e){console.log(e)}))}},{key:"quitGame",value:function(){var e=this;fetch(E+"quitGame/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.currentUser,key:this.state.key,sessionId:this.state.sessionId})}).then((function(e){return e.json()})).then((function(t){"Ok"!=t.status?e.props.alert.show(t.status):(e.setState({gameStarted:!1}),e.getBalance())})).catch((function(e){console.log(e)}))}},{key:"sendMessage",value:function(){var e=""==this.state.username?"Guest":this.state.username;U.emit("CHAT",{sender:e,message:this.state.chatMessage,color:this.state.colorIndex}),this.setState({chatMessage:""})}},{key:"handleMessageBox",value:function(e){this.setState({chatMessage:e.target.value})}},{key:"handlePanels",value:function(e){this.setState({currentPanel:e})}},{key:"handleKey",value:function(e){this.setState({privateKey:e.target.value})}},{key:"handleAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"handleAddress",value:function(e){this.setState({coinbase:e.target.value})}},{key:"render",value:function(){var e=[Object(k.jsx)(A,{joinGame:this.joinGame,logOut:this.logOut,username:this.state.username,balance:this.state.balance+this.state.spent,handlePanels:this.handlePanels}),Object(k.jsx)(I,{joinGame:this.joinGame,username:this.state.username,balance:this.state.balance+this.state.spent,handlePanels:this.handlePanels,handleAmount:this.handleAmount,amount:this.state.amount,privateKey:this.state.privateKey,handleKey:this.handleKey,topUp:this.topUp}),Object(k.jsx)(N,{joinGame:this.joinGame,username:this.state.username,balance:this.state.balance+this.state.spent,handlePanels:this.handlePanels,coinbase:this.state.coinbase,handleAmount:this.handleAmount,handleAddress:this.handleAddress,amount:this.state.amount,cashOut:this.cashOut})];return Object(k.jsxs)("div",{className:"Home",children:[this.state.boomMsgList.length>0&&Object(k.jsx)("div",{className:"boom-message-list",children:Object(k.jsx)("div",{children:Object(k.jsx)("div",{children:this.state.boomMsgList.map((function(e){return Object(k.jsx)("div",{children:Object(k.jsx)("div",{className:"boom-message",style:{backgroundImage:"url(/images/boom.png)"},children:e})})}))})})}),Object(k.jsxs)("div",{className:"Panel",children:[Object(k.jsx)("h1",{children:"Balloon Game"}),""==this.state.currentUser?Object(k.jsx)(L,{login:this.login,register:this.register}):this.state.gameStarted?null:e[this.state.currentPanel]]}),this.state.gameStarted&&Object(k.jsx)(P,{messageList:this.state.messageList,chatMessage:this.state.chatMessage,handleChat:this.handleMessageBox,sendMessage:this.sendMessage,colors:K}),Object(k.jsx)(B,{userCount:this.state.userCount,clickBalloon:this.clickBalloon,gameStarted:this.state.gameStarted}),Object(k.jsxs)("div",{style:{position:"absolute",left:"0px",top:"0px",backgroundColor:"#00000052",borderRadius:"5px",margin:"10px",color:"white",padding:"5px"},children:[Object(k.jsx)("h1",{children:this.state.userCount}),"Players"]}),Object(k.jsxs)("div",{style:{position:"absolute",right:"0px",top:"0px",backgroundColor:"#00000052",borderRadius:"5px",margin:"10px",color:"white",padding:"5px"},children:["Balance",Object(k.jsx)("h1",{children:this.state.balance+this.state.spent})]}),this.state.gameStarted?Object(k.jsx)("div",{onClick:this.quitGame,style:{position:"absolute",right:"0px",bottom:"0px",backgroundColor:"#00000052",borderRadius:"5px",margin:"10px",color:"white",padding:"5px"},children:"Quit Game"}):null]})}}]),s}(i.Component),J=Object(O.c)()(F),_=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(p.a,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(b.a,{exact:!0,path:"/",render:function(e){return Object(k.jsx)(J,Object(a.a)({},e))}}),Object(k.jsx)(b.a,{path:"/exchange",render:function(e){return Object(k.jsx)(B,Object(a.a)({},e))}})]})})})}}]),s}(i.Component),q=s(255);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(k.jsx)(O.a,Object(a.a)(Object(a.a)({template:q.a},{position:"bottom center",timeout:5e3,offset:"30px",transition:"fade"}),{},{children:Object(k.jsx)(_,{})})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[546,1,2]]]);
//# sourceMappingURL=main.4bb32f4a.chunk.js.map